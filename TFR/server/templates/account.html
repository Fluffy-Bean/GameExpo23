{% extends "base.html" %}
{% block nav %}
    <hr>
    <nav>
        <a href="{{ url_for('auth.account', action='logout') }}" class="button">Your Profile</a>
        <span class="spacer"></span>
        <a href="{{ url_for('auth.account', action='logout') }}" class="button secondary">Logout</a>
    </nav>
{% endblock %}
{% block content %}
    <div class="block">
        <h2>Sessions</h2>
        <p>Devices and games that you logged into, yeet them if it wasn't you who logged in!</p>
        {% if sessions %}
            <table>
                {% for session in sessions %}
                    <tr id="sess-{{ session.id }}">
                        <td><button onclick="yeetSession({{ session.id }})" class="button secondary"><i class="ph ph-trash"></i></button></td>
                        <td>{{ session.device_type }}</td>
                        <td>{{ session.created_at.strftime('%Y-%m-%d') }}</td>
                        <td>{{ session.last_used.strftime('%Y-%m-%d') }}</td>
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <p>No sessions active. If you're looking to logout all website users, reset your password.</p>
        {% endif %}
    </div>

    <div class="block secondary">
        <h2>Danger Zone</h2>
        <p>These actions are irreversible. Be careful!</p>
        <a href="{{ url_for('auth.account', action='delete') }}" class="button secondary">Delete Account</a>
        <a href="{{ url_for('auth.account', action='password') }}" class="button secondary">Reset Password</a>
    </div>
{% endblock %}
